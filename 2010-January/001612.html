<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Kiwi-users] &lt;deploy /&gt; in config.xml
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/kiwi-users/2010-January/index.html" >
   <LINK REL="made" HREF="mailto:kiwi-users%40lists.berlios.de?Subject=Re%3A%20%5BKiwi-users%5D%20%3Cdeploy%20/%3E%20in%20config.xml&In-Reply-To=%3C1264773759.16279.400.camel%40acme.pacific%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001611.html">
   <LINK REL="Next"  HREF="001613.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Kiwi-users] &lt;deploy /&gt; in config.xml</H1>
    <B>Roger Oberholtzer</B> 
    <A HREF="mailto:kiwi-users%40lists.berlios.de?Subject=Re%3A%20%5BKiwi-users%5D%20%3Cdeploy%20/%3E%20in%20config.xml&In-Reply-To=%3C1264773759.16279.400.camel%40acme.pacific%3E"
       TITLE="[Kiwi-users] &lt;deploy /&gt; in config.xml">roger at opq.se
       </A><BR>
    <I>Fri Jan 29 15:02:39 CET 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="001611.html">[Kiwi-users] &lt;deploy /&gt; in config.xml
</A></li>
        <LI>Next message: <A HREF="001613.html">[Kiwi-users] &lt;deploy /&gt; in config.xml
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1612">[ date ]</a>
              <a href="thread.html#1612">[ thread ]</a>
              <a href="subject.html#1612">[ subject ]</a>
              <a href="author.html#1612">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Fri, 2010-01-29 at 12:18 +0100, Marcus Sch&#228;fer wrote:
&gt;<i> Hi,
</I>
My config.default file (made by hand) contains only:

AOEROOT=/dev/etherd/e0.1

This is read, and the root over AoE happens.

I see that the kiwi build makes a config file that says:

DISK=/dev/sda
PART=5;S;x,127;L;/,x;L;x,
IMAGE=/dev/sda2;RSofT-Mini-openSUSE-11.2.i686;1.2.8;10.2.10.14;4096
UNIONFS_CONFIG=/dev/sda3,/dev/sda2,clicfs

But this second config is not seen by my kiwi images. Only the one
containing AOEROOT.

Perhaps this explains why I seem to have trouble with making kiwi
images. Some refuse to boot properly, when all I have done is add a
small rpm. I mentioned this 'stability' issue in an earlier post. It has
not gone away :(

You mention pxedeploy. Is that different from deploy? 

How does the IMAGE statement relate to the AOEROOT statement? I would
think that the IMAGE statement is not used.

Are the DISK and PART items useful when there is no physical disk? Only
the root file system (made by kiwi) accessed over AoE.


&gt;<i> 
</I>&gt;<i> &gt; I have a &lt;deploy /&gt; section in my config.xml. It has always been there.
</I>&gt;<i> &gt; I am wondering if I really need it.
</I>&gt;<i> 
</I>&gt;<i> it makes sense to have a pxedeploy section for pxe images only
</I>&gt;<i> That's correct
</I>&gt;<i> 
</I>&gt;<i> &gt; I make kiwi images that boot via PXE on a diskless system. The diskless
</I>&gt;<i> &gt; system seems only to use:
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 	linux (the kernel image)
</I>&gt;<i> &gt; 	initrd (the initial ram disk image)
</I>&gt;<i> &gt; 	config.default (tells that the root is available via AoE)
</I>&gt;<i> &gt; 	root (the root image mounted with AoE)
</I>&gt;<i> 
</I>&gt;<i> and on boot the kiwi initrd reads the config.&lt;MAC&gt; which is the
</I>&gt;<i> file created according to the information of the pxedeploy section
</I>&gt;<i> in your config.xml
</I>&gt;<i> 
</I>&gt;<i> &gt; Some parts are wrong. Like the server. The rest seem suspect. If it is
</I>&gt;<i> &gt; used, I need to make sure it is correct. If it is not used, can I remove
</I>&gt;<i> &gt; it from my config.xml?
</I>&gt;<i> 
</I>&gt;<i> The pxedeploy section is more or less a helper section which creates
</I>&gt;<i> a file including information important on deploy of the image.
</I>&gt;<i> If you remove it from your config.xml you still can create the
</I>&gt;<i> image as before. If it comes to the point that the client boots
</I>&gt;<i> up the kernel will load the initrd and run the code inside. The netboot
</I>&gt;<i> code of kiwi now tries to load the client configuration which is
</I>&gt;<i> that file created by the deploy section. You are free to create
</I>&gt;<i> that client configuration file yourself and maintain it somehow
</I>&gt;<i> but in order to boot up some configuration must exist no matter
</I>&gt;<i> how it was created
</I>&gt;<i> 
</I>&gt;<i> Regards,
</I>&gt;<i> Marcus
</I>

-- 
Roger Oberholtzer

OPQ Systems / Ramb&#246;ll RST

Ramb&#246;ll Sverige AB
Krukmakargatan 21
P.O. Box 17009
SE-104 62 Stockholm, Sweden

Office: Int +46 10-615 60 20
Mobile: Int +46 70-815 1696


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001611.html">[Kiwi-users] &lt;deploy /&gt; in config.xml
</A></li>
	<LI>Next message: <A HREF="001613.html">[Kiwi-users] &lt;deploy /&gt; in config.xml
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1612">[ date ]</a>
              <a href="thread.html#1612">[ thread ]</a>
              <a href="subject.html#1612">[ subject ]</a>
              <a href="author.html#1612">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/kiwi-users">More information about the Kiwi-users
mailing list</a><br>
</body></html>
