<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Kiwi-users] /lib/firmware in PXE diskless image initrd
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/kiwi-users/2010-January/index.html" >
   <LINK REL="made" HREF="mailto:kiwi-users%40lists.berlios.de?Subject=Re%3A%20%5BKiwi-users%5D%20/lib/firmware%20in%20PXE%20diskless%20image%20initrd&In-Reply-To=%3C1263386717.3413.119.camel%40acme.pacific%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001581.html">
   <LINK REL="Next"  HREF="001583.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Kiwi-users] /lib/firmware in PXE diskless image initrd</H1>
    <B>Roger Oberholtzer</B> 
    <A HREF="mailto:kiwi-users%40lists.berlios.de?Subject=Re%3A%20%5BKiwi-users%5D%20/lib/firmware%20in%20PXE%20diskless%20image%20initrd&In-Reply-To=%3C1263386717.3413.119.camel%40acme.pacific%3E"
       TITLE="[Kiwi-users] /lib/firmware in PXE diskless image initrd">roger at opq.se
       </A><BR>
    <I>Wed Jan 13 13:45:17 CET 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="001581.html">[Kiwi-users] Create extra (swap) partition
</A></li>
        <LI>Next message: <A HREF="001583.html">[Kiwi-users] /lib/firmware in PXE diskless image initrd
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1582">[ date ]</a>
              <a href="thread.html#1582">[ thread ]</a>
              <a href="subject.html#1582">[ subject ]</a>
              <a href="author.html#1582">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I have a system that uses the Intel e100 driver. The last KIWI image I
made for this type of system was with openSUSE 10.3, when, it seems, the
e100 driver did not load any firmware. The e100 driver in openSUSE 11.2,
however, does require firmware. I see in the failed boot that the
firmware file was not found, and it is indeed not present.

I see that the root file that I eventually mount (nbd or aoe) does
contain all the firmware in /lib/firmware/&lt;kervelVersion&gt;. However, the
initrd does not contain /lib/firmware at all. And it is then that this
is needed, as that is when the e100 driver is loaded: before the main
image is mounted.

My config.xml file states:

&lt;type filesystem=&quot;clicfs&quot; boot=&quot;netboot/suse-11.2&quot;&gt;pxe&lt;/type&gt;

So I am guessing that the files in this directory are making the initrd:

	/usr/share/kiwi/image/netboot/suse-11.2/

Do I need to edit a file here and add &quot;kernel-firmware&quot; to get these
firmware images in the initrd? No other way to do this? Previously I
took this route and found myself in a confused position when using a
newer release of KIWI. So I would prefer to make few, if any, changes to
the KIWI files that make the core part of the system.

Perhaps this is an aside, but why does the kernel-firmware RPM have the
files in /lib/firmware, while the running KIWI image seems to have them
in /lib/firmware/&lt;kervelVersion&gt;?


-- 
Roger Oberholtzer

OPQ Systems / Ramb&#246;ll RST

Ramb&#246;ll Sverige AB
Krukmakargatan 21
P.O. Box 17009
SE-104 62 Stockholm, Sweden

Office: Int +46 10-615 60 20
Mobile: Int +46 70-815 1696


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001581.html">[Kiwi-users] Create extra (swap) partition
</A></li>
	<LI>Next message: <A HREF="001583.html">[Kiwi-users] /lib/firmware in PXE diskless image initrd
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1582">[ date ]</a>
              <a href="thread.html#1582">[ thread ]</a>
              <a href="subject.html#1582">[ subject ]</a>
              <a href="author.html#1582">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/kiwi-users">More information about the Kiwi-users
mailing list</a><br>
</body></html>
