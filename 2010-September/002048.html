<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Kiwi-users] Installing a Kiwi image on a different partition
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/kiwi-users/2010-September/index.html" >
   <LINK REL="made" HREF="mailto:kiwi-users%40lists.berlios.de?Subject=Re%3A%20%5BKiwi-users%5D%20Installing%20a%20Kiwi%20image%20on%20a%20different%20partition&In-Reply-To=%3C4CA1ED80.5090002%40novell.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002047.html">
   <LINK REL="Next"  HREF="002049.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Kiwi-users] Installing a Kiwi image on a different partition</H1>
    <B>Robert Schweikert</B> 
    <A HREF="mailto:kiwi-users%40lists.berlios.de?Subject=Re%3A%20%5BKiwi-users%5D%20Installing%20a%20Kiwi%20image%20on%20a%20different%20partition&In-Reply-To=%3C4CA1ED80.5090002%40novell.com%3E"
       TITLE="[Kiwi-users] Installing a Kiwi image on a different partition">rschweikert at novell.com
       </A><BR>
    <I>Tue Sep 28 15:28:32 CEST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="002047.html">[Kiwi-users] VMDK for ESX
</A></li>
        <LI>Next message: <A HREF="002049.html">[Kiwi-users] Installing a Kiwi image on a different partition
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2048">[ date ]</a>
              <a href="thread.html#2048">[ thread ]</a>
              <a href="subject.html#2048">[ subject ]</a>
              <a href="author.html#2048">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

&lt;snip&gt;

&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> This is to be accomplished using a common Kiwi image that can also be
</I>&gt;&gt;<i> used to install to virgin, completely blank hard drives.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> For the bare metal install you definitely want to use an OEM image, ISO
</I>&gt;&gt;<i> or USB.
</I>&gt;<i> 
</I>&gt;<i> That is the plan. My question is if we can use the same OEM image for upgrade installations to the target partition. We have a requirement that we only have a single ISO for upgrade and install.
</I>
In this case I would suggest that you use the &lt;oem-partition&gt; feature
added relatively recently. You can hen use the new &quot;preHWdetect&quot; hook to
create your own partitions and let Kiwi dump the image you created into
one of the selected partitions.

There is no example yet about the hooks that were recently added to
Kiwi, but they are documented.

&gt;<i> 
</I>&gt;&gt;&gt;<i> I've tried just manually extracting the raw image data that's created
</I>&gt;&gt;<i> by our Kiwi scripts/configuration but it doesn't contain a proper
</I>&gt;&gt;<i> initrd to boot off of,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The raw image is a complete disk image, you can test it with
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> # qemu-kvm file-name.raw
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> You can dump this image to any disk and boot it and it will work.
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> which leads me to believe that this part is handled by the Kiwi code
</I>&gt;&gt;<i> that installs
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The kiwi install code for an OEM image basically just does a &quot;dd&quot;
</I>&gt;&gt;<i> operation.
</I>&gt;<i> 
</I>&gt;<i> I see... That's interesting as when I do a loopback mount of the image, there doesn't appear to be a valid initrd in /boot. At least it's nothing I can use to feed into grub for booting purposes.
</I>
The initrd is valid as menu.lst in the /boot of the ISO image points to
it for install purposes.

HTH,
Robert
&gt;<i> 
</I>
-- 
Robert Schweikert                           MAY THE SOURCE BE WITH YOU
Software Engineer Consultant                          LINUX
<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-users">rschweikert at novell.com</A>
781-464-8147

Novell
Making IT Work As One

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002047.html">[Kiwi-users] VMDK for ESX
</A></li>
	<LI>Next message: <A HREF="002049.html">[Kiwi-users] Installing a Kiwi image on a different partition
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2048">[ date ]</a>
              <a href="thread.html#2048">[ thread ]</a>
              <a href="subject.html#2048">[ subject ]</a>
              <a href="author.html#2048">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/kiwi-users">More information about the Kiwi-users
mailing list</a><br>
</body></html>
