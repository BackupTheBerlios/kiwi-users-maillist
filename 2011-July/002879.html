<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Kiwi-users] get rid of the --prebuiltbootimage code
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/kiwi-users/2011-July/index.html" >
   <LINK REL="made" HREF="mailto:kiwi-users%40lists.berlios.de?Subject=Re%3A%20%5BKiwi-users%5D%20get%20rid%20of%20the%20--prebuiltbootimage%20code&In-Reply-To=%3C4E306F3E.80400%40nassur.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002882.html">
   <LINK REL="Next"  HREF="002883.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Kiwi-users] get rid of the --prebuiltbootimage code</H1>
    <B>e.waelde</B> 
    <A HREF="mailto:kiwi-users%40lists.berlios.de?Subject=Re%3A%20%5BKiwi-users%5D%20get%20rid%20of%20the%20--prebuiltbootimage%20code&In-Reply-To=%3C4E306F3E.80400%40nassur.net%3E"
       TITLE="[Kiwi-users] get rid of the --prebuiltbootimage code">ew.ng7125 at nassur.net
       </A><BR>
    <I>Wed Jul 27 22:04:14 CEST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="002882.html">[Kiwi-users] get rid of the --prebuiltbootimage code
</A></li>
        <LI>Next message: <A HREF="002883.html">[Kiwi-users] kiwi: Weekly report 2011-07-24 - 2011-07-29...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2879">[ date ]</a>
              <a href="thread.html#2879">[ thread ]</a>
              <a href="subject.html#2879">[ subject ]</a>
              <a href="author.html#2879">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

On 07/27/2011 04:37 PM, Marcus Sch&#228;fer wrote:
&gt;<i> Hi All,
</I>&gt;<i>
</I>&gt;<i> I'd like to remove/refactor support for the --prebuiltbootimage
</I>&gt;<i> code. As you might know you can give kiwi a path to an already
</I>&gt;<i> built initrd and it will use that file just as it is. And that's
</I>&gt;<i> exactly the problem. During the development of kiwi some options
</I>&gt;<i> has been added which allows to add modifications to the initrd
</I>&gt;<i> which are configured as part of the system image description.
</I>&gt;<i> For example bootinclude=&quot;true&quot; or LVM configuration, or OEM
</I>&gt;<i> parameters for the swapspace, etc etc
</I>&gt;<i>
</I>&gt;<i> That means we have created a more and more important connection
</I>&gt;<i> between the setup in the system image and the boot image.
</I>&gt;<i> Thus using a static prebuilt version of a boot image (initrd)
</I>&gt;<i> causes trouble sooner or later.
</I>&gt;<i>
</I>&gt;<i> I'd like to remove that code and add an option which allows to
</I>&gt;<i> recycle an existing root tree like we have it with --recycle-root
</I>&gt;<i> for the system image. So something like --boot-recycle-root
</I>&gt;<i>
</I>&gt;<i> That way the system would be more stable:
</I>&gt;<i>
</I>&gt;<i> - support for base root of the system image
</I>&gt;<i> - support for base root of the boot image
</I>&gt;<i>
</I>&gt;<i> - support for image caches for system images
</I>&gt;<i> - support for image caches for boot images
</I>&gt;<i>
</I>&gt;<i> - no support for prebuilt static boot images anymore
</I>&gt;<i>
</I>&gt;<i> Any objections ? I know Studio currently uses --prebuiltbootimage
</I>&gt;<i> but we should get rid of it
</I>
I'm not sure.

I'm using a vmx image, which is copied to disk. I didn't like
the fact that during the first boot the initrd is being rebuild on the
target system. Since the target hw is well known, and since a person
has to wait for the first boot to complete, I have chosen to
&quot;postbuild&quot; the image: The Name-version.raw file is loop mounted,
all needed kernel modules are communicated via /etc/sysconfig/kernel,
and I'm basically calling mkinitrd in a chroot shell.

I have looked somewhat at the OEM options, but I don't see any
advantage to build the very same initrd time and time again
during installation (or doing the same partitioning every time).
So I was thinking about using --prebuiltbootimage. This image is
then converted into a format usable by our production environment.

Obviously I'm not using the code in question at this time. But this
particular use case might be more common. Anyone else?


Cheers and thanks for maintaining kiwi!
Erich

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002882.html">[Kiwi-users] get rid of the --prebuiltbootimage code
</A></li>
	<LI>Next message: <A HREF="002883.html">[Kiwi-users] kiwi: Weekly report 2011-07-24 - 2011-07-29...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2879">[ date ]</a>
              <a href="thread.html#2879">[ thread ]</a>
              <a href="subject.html#2879">[ subject ]</a>
              <a href="author.html#2879">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/kiwi-users">More information about the Kiwi-users
mailing list</a><br>
</body></html>
