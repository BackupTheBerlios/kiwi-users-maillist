<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Kiwi-users] [opensuse-buildservice] kiwi's ignore element?
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/kiwi-users/2011-February/index.html" >
   <LINK REL="made" HREF="mailto:kiwi-users%40lists.berlios.de?Subject=Re%3A%20%5BKiwi-users%5D%20%5Bopensuse-buildservice%5D%20kiwi%27s%20ignore%20element%3F&In-Reply-To=%3CAANLkTinL3-mprQM9gg8_KmCw0b%3DM6cchyyVw9A7pN3cU%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002339.html">
   <LINK REL="Next"  HREF="002342.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Kiwi-users] [opensuse-buildservice] kiwi's ignore element?</H1>
    <B>Chris Cunha</B> 
    <A HREF="mailto:kiwi-users%40lists.berlios.de?Subject=Re%3A%20%5BKiwi-users%5D%20%5Bopensuse-buildservice%5D%20kiwi%27s%20ignore%20element%3F&In-Reply-To=%3CAANLkTinL3-mprQM9gg8_KmCw0b%3DM6cchyyVw9A7pN3cU%40mail.gmail.com%3E"
       TITLE="[Kiwi-users] [opensuse-buildservice] kiwi's ignore element?">eportel6607 at gmail.com
       </A><BR>
    <I>Wed Feb 16 23:00:28 CET 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="002339.html">[Kiwi-users] [opensuse-buildservice] kiwi's ignore element?
</A></li>
        <LI>Next message: <A HREF="002342.html">[Kiwi-users] [opensuse-buildservice] kiwi's ignore element?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2341">[ date ]</a>
              <a href="thread.html#2341">[ thread ]</a>
              <a href="subject.html#2341">[ subject ]</a>
              <a href="author.html#2341">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, Feb 16, 2011 at 2:55 PM, Robert Schweikert
&lt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-users">rschweikert at novell.com</A>&gt; wrote:
&gt;<i> Hi Chris,
</I>&gt;<i>
</I>&gt;<i> &lt;snip&gt;
</I>&gt;<i>
</I>&gt;&gt;<i> I hope I'm posting this correctly. I'm not sure if the all the post
</I>&gt;&gt;<i> from the buildservice ML made it over to the kiwi ML.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Let me try an break down where I am so far and give as much info as I
</I>&gt;&gt;<i> can regarding packages.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The technique that I used to make all of my branding packages was this.
</I>&gt;&gt;<i> 1) I first download the source files from the openSUSE11.3 project of
</I>&gt;&gt;<i> the particular branding package that I want in OBS.
</I>&gt;&gt;<i> 2) I then make a copy on my local machine of that branding package.
</I>&gt;&gt;<i> 3) I go though the config files, spec file, tar, and image and replace
</I>&gt;&gt;<i> and update everything to what I need it to be.
</I>&gt;&gt;<i> 4) I then repackage it create a new package in my OBS account and
</I>&gt;&gt;<i> upload the contents of the source and have OBS build the package.
</I>&gt;&gt;<i> I've had many issue with builds but I'm sure they were a lack of
</I>&gt;&gt;<i> experience on my part.
</I>&gt;&gt;<i> 5) I then update my config.xml file locally so that Kiwi can pull that
</I>&gt;&gt;<i> package in from my repo.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I do remember the link that (I think it was Marcus) posted (
</I>&gt;&gt;<i> <A HREF="http://en.opensuse.org/SDB:KIWI_Cookbook_Splash_Screen#Custom_GRUB_and_boot_splash_images">http://en.opensuse.org/SDB:KIWI_Cookbook_Splash_Screen#Custom_GRUB_and_boot_splash_images</A>).
</I>&gt;&gt;<i> &#160;I know for sure that I did go though MOST of that page but I'm also
</I>&gt;&gt;<i> sure that I ended up using OpenPC version of GFXBOOT and BootSplash to
</I>&gt;&gt;<i> fill in the blanks...BIG mistake as OpenPC has Javier. He has some
</I>&gt;&gt;<i> experience and kind of did things his own way. &#160;I think his way works
</I>&gt;&gt;<i> very well but I need to build a foundation for my methods and his way
</I>&gt;&gt;<i> is over my head right now.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Now regarding the question &quot;&quot;where do your package install the files&quot;.
</I>&gt;&gt;<i> &#160;Well since my branding package such as GFXBOOT and Bootsplash are
</I>&gt;&gt;<i> based on SUSE versions they are where the SUSE branding package would
</I>&gt;&gt;<i> be EXCEPT that my projects name is the folder for the theme not
</I>&gt;&gt;<i> &quot;openSUSE&quot; or &quot;SUSE&quot;. &#160;So this project name right now is SOS. &#160;So all
</I>&gt;&gt;<i> of my themes are all in the SOS theme folder. &#160;The rule of thumb on
</I>&gt;&gt;<i> this is that EVERYTHING in the whatever branding package that we are
</I>&gt;&gt;<i> talking about that was named/labeled &quot;openSUSE&quot; is now named &quot;SOS&quot;.
</I>&gt;&gt;<i> So I don't think there is a problem with the package itself...although
</I>&gt;&gt;<i> I remember about a month ago I had a similar issue with my GFXBOOT
</I>&gt;&gt;<i> package. &#160;Same conflict. &#160;I can't remember who helped me with that but
</I>&gt;&gt;<i> I do remember having to tweak the spec file of this package and remove
</I>&gt;&gt;<i> some &quot;openSUSE&quot; stuff and I think we removed the &quot;conflicts&quot; string on
</I>&gt;&gt;<i> one of the subpackages. &#160;I'm sure this issue is my fault I just don't
</I>&gt;&gt;<i> know where the faults is.
</I>&gt;<i>
</I>&gt;<i> Please, post the error message. Without it we will be guessing forever
</I>&gt;<i> more. Playing a guessing game looses it's appeal at some point as there
</I>&gt;<i> is little satisfaction after a while.
</I>&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I ran the command &quot;kiwi --info /path/to/image/description --select
</I>&gt;&gt;<i> packages&quot;. &#160; This command looks like it shows EVERY package that is
</I>&gt;&gt;<i> being installed. &#160;Including the ones in the patterns. Is this correct?
</I>&gt;<i>
</I>&gt;<i> Yes
</I>&gt;<i>
</I>&gt;&gt;<i> &#160; I can clearly see both the &quot;lxde-common-branding-SOS&quot; and the
</I>&gt;&gt;<i> &quot;lxde-common-branding-openSUSE&quot; package visible.
</I>&gt;&gt;<i> Looking at the LONG list of packages that shows up when running &#160;this
</I>&gt;&gt;<i> command seems like it's crazy to manually enter the package separately
</I>&gt;&gt;<i> and remove the patterens. &#160;Correct?
</I>&gt;<i>
</I>&gt;<i> Yes
</I>&gt;<i>
</I>&gt;&gt;<i> &#160;Learning what is causing this
</I>&gt;&gt;<i> package conflict is the key to this issue...and to avoid many more
</I>&gt;&gt;<i> like it as I have lots of other branded packages to replace, such as
</I>&gt;&gt;<i> Suse.release and others like it.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> For this project I always was trying to do my rebrands all the way.
</I>&gt;&gt;<i> Not using the existing SUSE dir and files to hold my images and
</I>&gt;&gt;<i> configs with the openSUSE name. &#160;I thought by taking the original
</I>&gt;&gt;<i> source and changing everything that this issue wouldn't exist because
</I>&gt;&gt;<i> the packages have their own direct and configs.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The answer to the question &quot;What is the oem branding package ?&quot; &#160;By
</I>&gt;&gt;<i> OEM I mean the our branded packages. &#160;Original Equipment Manufacturer.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Maybe the best way to get to the problem is if you guys could take a
</I>&gt;&gt;<i> look at my spec file for this lxde-common-branding-SOS package,
</I>&gt;<i>
</I>&gt;<i> Seeing the actual error message would certainly help to speed things up.
</I>&gt;<i>
</I>&gt;<i> In general, while Marcus and I are more than happy to help, as are other
</I>&gt;<i> users on this list, it is much easier for us to help if we have an error
</I>&gt;<i> message to work with.
</I>&gt;<i>
</I>&gt;<i> Statements such as
</I>&gt;<i>
</I>&gt;<i> package A conflicts with package B
</I>&gt;<i>
</I>&gt;<i> are not very useful to us for providing good answers.
</I>&gt;<i>
</I>&gt;&gt;<i> the
</I>&gt;&gt;<i> config.xml file that kiwi is using to make the image and anything else
</I>&gt;&gt;<i> that you can think of that will confirm one way or another what the
</I>&gt;&gt;<i> issue is. &#160;The more I do the more I know what isn't or is correct. &#160;I
</I>&gt;&gt;<i> just don't have enough of &quot;correct&quot; to know what I'm doing yet.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> This SOS project is &#160;subproject of another project of mine...if that matters.
</I>&gt;&gt;<i> The link to the lxde-common-branding-SOS branding package is here
</I>&gt;&gt;<i> <A HREF="https://build.opensuse.org/project/packages?package=&amp;project=home%3Aeportel6607%3ASOS">https://build.opensuse.org/project/packages?package=&amp;project=home%3Aeportel6607%3ASOS</A>
</I>&gt;<i>
</I>&gt;<i> You have the conflict built right into your spec file:
</I>&gt;<i>
</I>&gt;<i> Provides: &#160; &#160; &#160; lxde-common-branding = %{version}
</I>&gt;<i> Conflicts: &#160; &#160; &#160;otherproviders(lxde-common-branding)
</I>&gt;<i>
</I>&gt;<i> I bet the project provided LXDE branding package also provides
</I>&gt;<i> lxde-common-branding, and since your spec explicitly declares these two
</I>&gt;<i> in conflict there is no away around the problem from a package manager
</I>&gt;<i> perspective.
</I>&gt;<i>
</I>&gt;<i> I see the following options (in no particular order):
</I>&gt;<i>
</I>&gt;<i> 1.) Do not use a branding package and brand your build according to
</I>&gt;<i> <A HREF="http://en.opensuse.org/SDB:KIWI_Cookbook_Splash_Screen">http://en.opensuse.org/SDB:KIWI_Cookbook_Splash_Screen</A>
</I>&gt;<i>
</I>&gt;<i> 2.) Get rid of the conflict and allow two oe more providers of
</I>&gt;<i> lxde-common-branding. This should not be an issue as you are supposedly
</I>&gt;<i> putting everything in a different place than the project provided LXDE
</I>&gt;<i> branding. (Removing the &quot;Conflicts&quot; declaration from your spec file
</I>&gt;<i> should do the trick, I think. But I am not a packaging expert)
</I>&gt;<i>
</I>&gt;<i> You can then use a &lt;packages type=&quot;delete&quot;&gt;....&lt;/packages&gt; section in
</I>&gt;<i> config.xml to get rid of the unwanted package, i.e. the default branding
</I>&gt;<i> package pulled in via the LXDE pattern.
</I>&gt;<i>
</I>&gt;<i> 3.) List all packages explicitly and skip the packages causing a conflict.
</I>&gt;<i>
</I>&gt;<i> Option 2 appears to be the least effort.
</I>&gt;<i>
</I>&gt;&gt;<i> I should mention that the gfxboot and bootsplash branding package were
</I>&gt;&gt;<i> made the same way as this package and they both work fine. &#160;although
</I>&gt;&gt;<i> not without some pain with build failures.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The link to a pastebin page that has my config.xml file that kiwi is
</I>&gt;&gt;<i> using to build with is here: &#160;<A HREF="http://paste2.org/p/1250196">http://paste2.org/p/1250196</A>
</I>&gt;<i>
</I>&gt;<i> Took a quick look at config.xml and didn't see anything stick out.
</I>&gt;<i>
</I>&gt;<i> HTH,
</I>&gt;<i> Robert
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Robert Schweikert &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; MAY THE SOURCE BE WITH YOU
</I>&gt;<i> Novell-IBM Software Integration Center &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;LINUX
</I>&gt;<i> Tech Lead
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-users">rschweikert at novell.com</A>
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-users">rschweikert at ca.ibm.com</A>
</I>&gt;<i> 781-464-8147
</I>&gt;<i>
</I>&gt;<i> Novell
</I>&gt;<i> Making IT Work As One
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Kiwi-users mailing list
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-users">Kiwi-users at lists.berlios.de</A>
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-users">https://lists.berlios.de/mailman/listinfo/kiwi-users</A>
</I>&gt;<i>
</I>
Ok I apologize for the lack of info.   I'm so caught up in learning
this and kind of overwhelmed with making sure that I truly understand
what is 'the fix' and 'what is the problem' that I lost sight of the
basics...posting the error.
The error in the terminal when running kiwi --prepare is this:
Problem: lxde-common-branding-SOS-11.3-29.1.noarch conflicts with
namespace:otherproviders(lxde-common-branding) provided by
lxde-common-branding-openSUSE-11.3-54.2.noarch
 Solution 1: deinstallation of
lxde-common-branding-openSUSE-11.3-54.2.noarch
 Solution 2: do not install lxde-common-branding-SOS-11.3-29.1.noarch

I didn't think that the line in the spec file &quot;Conflicts:
otherproviders(lxde-common-branding)&quot; was a problem because I thought
there can only be one version of a package installed.  Also there is a
line in that spec file that points to a Suse package called
&quot;desktop-data-openSUSE&quot;. This is still pointing to this package
because I haven't made the SOS equivalent for it.   As a reminder, I
didn't make this spec file up from scratch this it the default Suse
spec file for this package just modified for my branding themes.  I
thought if it worked for Suse it should work for me too.  WRONG.

Ahhhh Ok I commented out the Conflicts line in the spec file and now I
got the opposite packages conflicting.  The new error reads&quot; Problem:
lxde-common-branding-openSUSE-11.3-54.2.noarch conflicts with
namespace:otherproviders(lxde-common-branding) provided by
lxde-common-branding-SOS-11.3-30.1.noarch
 Solution 1: deinstallation of
lxde-common-branding-openSUSE-11.3-54.2.noarch
 Solution 2: do not install lxde-common-branding-SOS-11.3-30.1.noarch  &quot;
I have the suse package in the delete section and my config.sh file
and have &quot;suseRemovePackagesMarkedForDeletion&quot; string under the
&quot;Functions&quot; section.  I'm am sooo lost.  Should I try the &quot;replaces&quot;
again in my config.xml file?

The option 1 method seems very similar to the way I did branding in
the past with my other base project (PCLOS and Unity).  Correct if I'm
wrong but doesn't this method leave you in a situation that if the OS
was to do an Update, any package(s) that were updated that regarding
branding would overwrite your branding packages?  I need to do this in
a way that it works as if it's the default package. Therefore updating
with the correct branding package.  Basiclly I think it needs to work
the way that Suse packages work with each other.

I'm not lazy that's for sure so I could do option 3 however I don't
think under these circumstances that it make sense to do it that way
because the list of packages that I don't want is far smaller than the
package I do want.

I guess there are many ways to approach resolving a problem like this.
 Right now I need to know one way and fully understand why I'm doing
it this/that way.  THEN I can apply that knowledge to other methods.
My goal is to make sure whatever I do to solve an issue is not going
to bite me in the butt 3 months from now and then have to rethink and
redo it all over again. That's happen before.

In terms of the &quot;ignore&quot; and &quot;delete&quot; elements.  First is there
something wrong with the &quot;ignore&quot; element?  Is it working the way that
it should?  I'm thinking that it was working fine it's just my
circumstances.

You mentioned that the &quot;delete&quot; element can be used if I choose to use
method 2 to delete the unwanted packages.  But this deletes the
packages when exactly...before Kiwi makes the final ISO, during the
completion of the &quot;unpacked&quot; image (at the end of the Kiwi --prepare&quot;
stage) or upon the install or live boot of the ISO itself?

So is the method that I'm using to make branded package acceptable or
am I asking for problems?  I naturally thought taking the original
branded package from openSUSE11.3 would be a good starting point.
I have many more branding packages to create.  To find out all the
branding package within this LXDE project should I run the rpm -q
command and then download the orignal default branding package and
then do what I've been doing so far.  That is copy package and rebrand
everything, spec, images, configs then repackage it and have OBS
rebuild it?

Thanks guys,
Chris

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002339.html">[Kiwi-users] [opensuse-buildservice] kiwi's ignore element?
</A></li>
	<LI>Next message: <A HREF="002342.html">[Kiwi-users] [opensuse-buildservice] kiwi's ignore element?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2341">[ date ]</a>
              <a href="thread.html#2341">[ thread ]</a>
              <a href="subject.html#2341">[ subject ]</a>
              <a href="author.html#2341">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/kiwi-users">More information about the Kiwi-users
mailing list</a><br>
</body></html>
