<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Kiwi-users] Fwd: USB image with storage partition
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/kiwi-users/2011-March/index.html" >
   <LINK REL="made" HREF="mailto:kiwi-users%40lists.berlios.de?Subject=Re%3A%20%5BKiwi-users%5D%20Fwd%3A%20USB%20image%20with%20storage%20partition&In-Reply-To=%3CAANLkTinrHEwEoC%3DCz_v%3D5KEpWoBqZvW5%2B_kCEGnBc7Ab%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002503.html">
   <LINK REL="Next"  HREF="002506.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Kiwi-users] Fwd: USB image with storage partition</H1>
    <B>Chris Cunha</B> 
    <A HREF="mailto:kiwi-users%40lists.berlios.de?Subject=Re%3A%20%5BKiwi-users%5D%20Fwd%3A%20USB%20image%20with%20storage%20partition&In-Reply-To=%3CAANLkTinrHEwEoC%3DCz_v%3D5KEpWoBqZvW5%2B_kCEGnBc7Ab%40mail.gmail.com%3E"
       TITLE="[Kiwi-users] Fwd: USB image with storage partition">eportel6607 at gmail.com
       </A><BR>
    <I>Thu Mar 17 19:56:10 CET 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="002503.html">[Kiwi-users] Fwd: USB image with storage partition
</A></li>
        <LI>Next message: <A HREF="002506.html">[Kiwi-users] Fwd: USB image with storage partition
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2504">[ date ]</a>
              <a href="thread.html#2504">[ thread ]</a>
              <a href="subject.html#2504">[ subject ]</a>
              <a href="author.html#2504">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, Mar 17, 2011 at 2:18 PM, Chris Cunha &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-users">eportel6607 at gmail.com</A>&gt; wrote:
&gt;<i> On Thu, Mar 17, 2011 at 11:57 AM, Chris Cunha &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-users">eportel6607 at gmail.com</A>&gt; wrote:
</I>&gt;&gt;<i> On Thu, Mar 17, 2011 at 5:03 AM, Marcus Sch&#228;fer &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-users">ms at suse.de</A>&gt; wrote:
</I>&gt;&gt;&gt;<i> Hi,
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> &gt; Also I booted another time and the /lvmboot directory wasn't there in
</I>&gt;&gt;&gt;&gt;<i> &gt; the file tree at all (on the live image) but the USB fat partition was
</I>&gt;&gt;&gt;&gt;<i> &gt; mounted in /media? What the heck is going on here?
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> This is also correct and the reason is because you want a ram-only
</I>&gt;&gt;&gt;&gt;<i> system by intention and that means everything written on first boot
</I>&gt;&gt;&gt;&gt;<i> will vanish after the second boot. As the lvmboot is just a bind link
</I>&gt;&gt;&gt;&gt;<i> to your fat partition created on first boot to setup all subsequent
</I>&gt;&gt;&gt;&gt;<i> boots, the link is gone after reboot
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> another reason for this is, you can't update the kernel while
</I>&gt;&gt;&gt;<i> running a ram-only OS. /boot would be persistently writable for
</I>&gt;&gt;&gt;<i> such an update but all the modules the new kernel will bring in
</I>&gt;&gt;&gt;<i> would be stored in RAM and are therefore gone on reboot. According
</I>&gt;&gt;&gt;<i> to this you wouldn't be able to boot the system after such an update
</I>&gt;&gt;&gt;<i> which is also a reason why we don't mount the boot partition to
</I>&gt;&gt;&gt;<i> /boot (/lvmboot) inside the live-os if it's ram-only
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Regards,
</I>&gt;&gt;&gt;<i> Marcus
</I>&gt;&gt;&gt;<i> --
</I>&gt;&gt;&gt;<i> &#160;Public Key available
</I>&gt;&gt;&gt;<i> &#160;gpg --keyserver gpg-keyserver.de --recv-keys 0xCCE3C6A2
</I>&gt;&gt;&gt;<i> &#160;-------------------------------------------------------
</I>&gt;&gt;&gt;<i> &#160;Marcus Sch&#228;fer (Res. &amp; Dev.) &#160; SUSE LINUX Products GmbH
</I>&gt;&gt;&gt;<i> &#160;Tel: 0911-740 53 0 &#160; &#160; &#160; &#160; &#160; &#160; Maxfeldstrasse 5
</I>&gt;&gt;&gt;<i> &#160;FAX: 0911-740 53 479 &#160; &#160; &#160; &#160; &#160; D-90409 N&#252;rnberg
</I>&gt;&gt;&gt;<i> &#160;GF: Markus Rex &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; HRB: 16746 (AG N&#252;rnberg)
</I>&gt;&gt;&gt;<i> &#160;<A HREF="http://www.suse.de">http://www.suse.de</A> &#160; &#160; &#160; &#160; &#160; &#160; Germany
</I>&gt;&gt;&gt;<i> &#160;-------------------------------------------------------
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Hi Marcus
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &quot;/boot or /lvmboot is a bad location for this because those
</I>&gt;&gt;<i> directories are created on first boot of the OS. Having that said
</I>&gt;&gt;<i> you can't place files in root/boot/... of your overlay tree in
</I>&gt;&gt;<i> your image description because they will not show up.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> To my knowledge KDE4 .desktop files are stored in the users
</I>&gt;&gt;<i> home directory. So copy your .desktop file into the home directory
</I>&gt;&gt;<i> of the desired user in the overlay tree:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &#160;cd &lt;image-description&gt;
</I>&gt;&gt;<i> &#160;cd root
</I>&gt;&gt;<i> &#160;mkdir -p /home/&lt;user-name&gt;/.local/share/applications/
</I>&gt;&gt;<i> &#160;cp &lt;icon-name&gt;.desktop /home/&lt;user-name&gt;/.local/share/applications/&quot;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Ok actually I'm using LXDE/Openbox for this project but no matter I
</I>&gt;&gt;<i> can find what talking about.
</I>&gt;&gt;<i> I did already make the .desktop file..but to what does this .desktop
</I>&gt;&gt;<i> file actually point too that will be there after the first boot?
</I>&gt;&gt;<i> I noticed after the first boot that the USB fat partition mounts in
</I>&gt;&gt;<i> /media. &#160;Actually with this particular USB drive the path is
</I>&gt;&gt;<i> /media/910E-c98C. &#160; Ok so I can't point the .desktop file at that
</I>&gt;&gt;<i> specific path because the &quot;910E-c98C&quot; part of the path will
</I>&gt;&gt;<i> change/vary with different USB drives...so what can I point this
</I>&gt;&gt;<i> .desktop file at that will be consistent with any USB drive? &#160; I
</I>&gt;&gt;<i> didn't just want to point it at /media because in the media location
</I>&gt;&gt;<i> (which is the only location that it appears that the fat partition is
</I>&gt;&gt;<i> accessible from) there is a &quot;boot&quot; directory along with a file
</I>&gt;&gt;<i> &quot;ldlinux.sy&quot;. &#160;I really would hope to avoid have the end user being
</I>&gt;&gt;<i> placed here. &#160; I was hoping to create the &quot;Storage&quot; folder on the fat
</I>&gt;&gt;<i> partition and have the .desktop file point at it.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Also after the second boot the file manager now shows the mounted fat
</I>&gt;&gt;<i> partition as &quot;325 MB Filesystem&quot;. &#160;Is this label for this editable?
</I>&gt;&gt;<i> Is this a Kiwi changeable thing?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The last question is what would be the behavior if i changed kiwi's
</I>&gt;&gt;<i> element &quot;ramonly=&quot;true&quot;&quot; to &quot;false&quot;?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Chris
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Why with the OEM type image is the first boot with image any different
</I>&gt;<i> than any other boot? &#160;With the ISO type image every boot is the
</I>&gt;<i> same...right? &#160;How is it with a Live image using and OEM image type
</I>&gt;<i> that it &quot;knows&quot; that it's the first time it's being ran compared to
</I>&gt;<i> any other time the image is booted?
</I>&gt;<i> So that means if I configured that .desktop file on the users Desktop
</I>&gt;<i> to point a /media &#160; that should work but on after the first boot and
</I>&gt;<i> not the first?
</I>&gt;<i>
</I>&gt;<i> In the file manager after the first boot the 300mb partition shows up,
</I>&gt;<i> along with the any other partition that is available, such as the
</I>&gt;<i> existing hard drive of the computer this live USB image is running on.
</I>&gt;<i> &#160;The strange thing is now that we switched the config for this image
</I>&gt;<i> from an ISO to and OEM my other test machine (on first or there after
</I>&gt;<i> boot) doesn't show this fat partition in file manager nor does it show
</I>&gt;<i> the existing hard drive of this test machine. &#160;In fact I can find the
</I>&gt;<i> fat partition on this other test machine at all. &#160;It's not in /media
</I>&gt;<i> and and there is no lxboot dir...This is killing me! &#160;Any idea how one
</I>&gt;<i> machine can show a different results than another using the same
</I>&gt;<i> image?
</I>&gt;<i> Chris
</I>&gt;<i>
</I>Wow...sorry about all these separate post but I keep testing and find
other questions.
The way things currently work the fat partition contains a &quot;boot&quot;
directory that holds the critical boot files for the OS.  As of right
now I don't see a way to keep the end user out of the boot folder.
Due to the boot folder being on the fat partition and there doesn't
seem to be a way to create a &quot;Storage&quot; folder on this fat partition
and have the .desktop file point to it, it seems that the .desktop
file must be pointed to the /media folder.   If I'm clear on this,
after the first boot if I was to click on this .desktop icon it would
bring me to the /media folder which is the fat32 partition.  There is
no structured place for the end users to place any files within this
fat partition. If the boot folder wasn't in this space or there was a
sub folder (say a &quot;Storage&quot; folder) on this partition  the end user
could get directly too I wouldn't be concerned. What might be the
answer to this issue?

Chris

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002503.html">[Kiwi-users] Fwd: USB image with storage partition
</A></li>
	<LI>Next message: <A HREF="002506.html">[Kiwi-users] Fwd: USB image with storage partition
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2504">[ date ]</a>
              <a href="thread.html#2504">[ thread ]</a>
              <a href="subject.html#2504">[ subject ]</a>
              <a href="author.html#2504">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/kiwi-users">More information about the Kiwi-users
mailing list</a><br>
</body></html>
