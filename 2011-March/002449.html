<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Kiwi-users] Execute script in profile
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/kiwi-users/2011-March/index.html" >
   <LINK REL="made" HREF="mailto:kiwi-users%40lists.berlios.de?Subject=Re%3A%20%5BKiwi-users%5D%20Execute%20script%20in%20profile&In-Reply-To=%3CC088D3516432C643AC828162A5164A7F08C86B21%40se3lmwbibaw.COMMUN.AD.SNCF.FR%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002445.html">
   <LINK REL="Next"  HREF="002454.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Kiwi-users] Execute script in profile</H1>
    <B>BONNETOT Jean-Daniel (EXT THALES)</B> 
    <A HREF="mailto:kiwi-users%40lists.berlios.de?Subject=Re%3A%20%5BKiwi-users%5D%20Execute%20script%20in%20profile&In-Reply-To=%3CC088D3516432C643AC828162A5164A7F08C86B21%40se3lmwbibaw.COMMUN.AD.SNCF.FR%3E"
       TITLE="[Kiwi-users] Execute script in profile">ext.thales.jean-daniel.bonnetot at sncf.fr
       </A><BR>
    <I>Thu Mar 10 17:21:02 CET 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="002445.html">[Kiwi-users] Execute script in profile
</A></li>
        <LI>Next message: <A HREF="002454.html">[Kiwi-users] PXE + NFS read-only
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2449">[ date ]</a>
              <a href="thread.html#2449">[ thread ]</a>
              <a href="subject.html#2449">[ subject ]</a>
              <a href="author.html#2449">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Ok, I place it at the end of config.sh:

#======================================
# Profile Foobar
#--------------------------------------
if echo &quot;$kiwi_profiles&quot; | grep -q &quot;foobar&quot;; then
	...
Fi

It works fine.
Thanks
---

Jean-Daniel Bonnetot

-----Message d'origine-----
De : Marcus Sch&#228;fer [mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-users">ms at suse.de</A>] 
Envoy&#233; : jeudi 10 mars 2011 11:49
&#192; : BONNETOT Jean-Daniel (EXT THALES)
Cc : <A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-users">kiwi-users at lists.berlios.de</A>
Objet : Re: [Kiwi-users] Execute script in profile

Hi,

&gt;<i> Some details ;)
</I>&gt;<i> I would like to run specific script only if I use --add-profile=foobar. This script have to be run at the end of the preparation step.
</I>
kiwi exports the variable $kiwi_profiles in your scripting environment. You can check if your profile is in the list and run the script according to that information. Make sure you have the following at the beginning of your script in order to be able to access the environment

   test -f /.profile &amp;&amp; . /.profile

Regards,
Marcus
--
 Public Key available
 gpg --keyserver gpg-keyserver.de --recv-keys 0xCCE3C6A2
 -------------------------------------------------------
 Marcus Sch&#228;fer (Res. &amp; Dev.)   SUSE LINUX Products GmbH
 Tel: 0911-740 53 0             Maxfeldstrasse 5
 FAX: 0911-740 53 479           D-90409 N&#252;rnberg
 GF: Markus Rex                 HRB: 16746 (AG N&#252;rnberg)
 <A HREF="http://www.suse.de">http://www.suse.de</A>             Germany
 -------------------------------------------------------
-------
Ce message et toutes les pi&#232;ces jointes sont &#233;tablis &#224; l'intention exclusive de ses destinataires et sont confidentiels. L'int&#233;grit&#233; de ce message n'&#233;tant pas assur&#233;e sur Internet, la SNCF ne peut &#234;tre tenue responsable des alt&#233;rations qui pourraient se produire sur son contenu. Toute publication, utilisation, reproduction, ou diffusion, m&#234;me partielle, non autoris&#233;e pr&#233;alablement par la SNCF, est strictement interdite. Si vous n'&#234;tes pas le destinataire de ce message, merci d'en avertir imm&#233;diatement l'exp&#233;diteur et de le d&#233;truire.
-------
This message and any attachments are intended solely for the addressees and are confidential. SNCF may not be held responsible for their contents whose accuracy and completeness cannot be guaranteed over the Internet. Unauthorized use, disclosure, distribution, copying, or any part thereof is strictly prohibited. If you are not the intended recipient of this message, please notify the sender immediately and delete it. 


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002445.html">[Kiwi-users] Execute script in profile
</A></li>
	<LI>Next message: <A HREF="002454.html">[Kiwi-users] PXE + NFS read-only
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2449">[ date ]</a>
              <a href="thread.html#2449">[ thread ]</a>
              <a href="subject.html#2449">[ subject ]</a>
              <a href="author.html#2449">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/kiwi-users">More information about the Kiwi-users
mailing list</a><br>
</body></html>
