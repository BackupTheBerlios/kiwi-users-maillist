<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Kiwi-users] Kiwi or package issue?
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/kiwi-users/2011-March/index.html" >
   <LINK REL="made" HREF="mailto:kiwi-users%40lists.berlios.de?Subject=Re%3A%20%5BKiwi-users%5D%20Kiwi%20or%20package%20issue%3F&In-Reply-To=%3C4D8BA65C.1050504%40novell.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002546.html">
   <LINK REL="Next"  HREF="002549.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Kiwi-users] Kiwi or package issue?</H1>
    <B>Robert Schweikert</B> 
    <A HREF="mailto:kiwi-users%40lists.berlios.de?Subject=Re%3A%20%5BKiwi-users%5D%20Kiwi%20or%20package%20issue%3F&In-Reply-To=%3C4D8BA65C.1050504%40novell.com%3E"
       TITLE="[Kiwi-users] Kiwi or package issue?">rschweikert at novell.com
       </A><BR>
    <I>Thu Mar 24 21:15:24 CET 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="002546.html">[Kiwi-users] Kiwi or package issue?
</A></li>
        <LI>Next message: <A HREF="002549.html">[Kiwi-users] Kiwi or package issue?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2547">[ date ]</a>
              <a href="thread.html#2547">[ thread ]</a>
              <a href="subject.html#2547">[ subject ]</a>
              <a href="author.html#2547">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>

&lt;snip&gt;

&gt;<i>
</I>&gt;<i> Hi Robert.  I need a systematic (Step 1....Step 2) to understand and
</I>&gt;<i> learn more about rpm building.  Is there a good tutorial from SUSE or
</I>&gt;<i> maybe tips or something that may have worked for you guys to learn
</I>&gt;<i> this stuff better?
</I>
Check out the the build service tutorial

<A HREF="http://en.opensuse.org/openSUSE:Build_Service_Tutorial">http://en.opensuse.org/openSUSE:Build_Service_Tutorial</A>

it has a lot of links to relevant information. Read the packaging guidelines

<A HREF="http://en.opensuse.org/openSUSE:Packaging_guidelines">http://en.opensuse.org/openSUSE:Packaging_guidelines</A>

Tips and tricks:
<A HREF="http://en.opensuse.org/openSUSE:Build_Service_Tips_and_Tricks">http://en.opensuse.org/openSUSE:Build_Service_Tips_and_Tricks</A>

The RPM book, a bit dated but still useful IMHO

<A HREF="http://www.rpm.org/max-rpm/">http://www.rpm.org/max-rpm/</A>

Also check out the packaging portal:

<A HREF="http://en.opensuse.org/Portal:Packaging">http://en.opensuse.org/Portal:Packaging</A>

&gt;<i> This is waaay too stressful doing this by the seat
</I>&gt;<i> of my pants.
</I>&gt;<i>
</I>&gt;<i> In this last build had only these repos enabled.
</I>&gt;<i> &lt;repository type=&quot;rpm-md&quot;&gt;
</I>&gt;<i> 		&lt;source path=&quot;<A HREF="http://download.opensuse.org/repositories/home:/eportel6607:/SOS/openSUSE_11.3">http://download.opensuse.org/repositories/home:/eportel6607:/SOS/openSUSE_11.3</A>&quot;/&gt;
</I>&gt;<i> 	&lt;/repository&gt;
</I>&gt;<i> 	&lt;repository type=&quot;rpm-md&quot;&gt;
</I>&gt;<i> 		&lt;source path=&quot;<A HREF="http://download.opensuse.org/repositories/X11:/lxde/openSUSE_11.3/">http://download.opensuse.org/repositories/X11:/lxde/openSUSE_11.3/</A>&quot;/&gt;
</I>
This is your culprit, right here. This is the LXDE project development 
repository, i.e. living on the bleeding edge. The LXDE developers will 
throw whatever they consider the latest and greates stable stuff into 
this repo, such that people who want to be as close to bleeding edge 
without being broken can follow this repo.

This is what I mean by &quot;understanding the moving parts&quot;. If you need 
stable you'll have to pull your LXDE packages from the standard 
repository and not configure X11:/lxde.

You can always use <A HREF="http://software.opensuse.org/search">http://software.opensuse.org/search</A> to serach for a 
specific package and find all the repositories (spare home projects by 
default) that contain the specific package. Anything .../standard will 
be stable, i.e. no major changes. The standard repo is controlled by 
Coolo and other and adheres to the openSUSE maintenance policy:

<A HREF="http://en.opensuse.org/Portal:Maintenance">http://en.opensuse.org/Portal:Maintenance</A>

&gt;<i> 	&lt;/repository&gt;
</I>&gt;<i> 	&lt;repository type=&quot;yast2&quot;&gt;
</I>&gt;<i> 		&lt;source path=&quot;<A HREF="opensuse://11.3/repo/non-oss/">opensuse://11.3/repo/non-oss/</A>&quot;/&gt;
</I>&gt;<i> 	&lt;/repository&gt;
</I>&gt;<i> 	&lt;repository type=&quot;rpm-md&quot;&gt;
</I>&gt;<i> 		&lt;source path=&quot;<A HREF="http://ftp.uni-erlangen.de/pub/mirrors/packman/suse/11.3/">http://ftp.uni-erlangen.de/pub/mirrors/packman/suse/11.3/</A>&quot;/&gt;
</I>&gt;<i> 	&lt;/repository&gt;
</I>&gt;<i> 	&lt;repository type=&quot;yast2&quot;&gt;
</I>&gt;<i> 		&lt;source path=&quot;<A HREF="opensuse://11.3/repo/oss/">opensuse://11.3/repo/oss/</A>&quot;/&gt;
</I>&gt;<i> 	&lt;/repository&gt;
</I>&gt;<i> I did have an update repo enabled but that was for some Broadcom
</I>&gt;<i> drivers...which didn't work anyway.
</I>&gt;<i>
</I>&gt;<i> In this last kiwi build of this image  the SUSE graphics that where
</I>&gt;<i> being used for this package (lxde-common-branding-openSUSE) has
</I>&gt;<i> definitly changed...so I guess it's safe to say that this package has
</I>&gt;<i> been update.  Although when I checked the package on OBS there is no
</I>&gt;<i> changes to it in the last 6 months.
</I>
Nope, you looked in the wrong place. The package probably hasn't changed 
in the standard repo. But you are getting your package from X11:/lxde 
and there the package changed yesterday:

<A HREF="http://download.opensuse.org/repositories/X11:/lxde/openSUSE_11.3/noarch/">http://download.opensuse.org/repositories/X11:/lxde/openSUSE_11.3/noarch/</A>

So another thing to understand is the behavior of zypper

<A HREF="http://en.opensuse.org/Portal:Zypper">http://en.opensuse.org/Portal:Zypper</A>

when a package exists in multiple places, and how priorities for 
repositories come into play.

&gt;<i>
</I>&gt;<i> After the OS from this image is up and running I open a terminal and
</I>&gt;<i> mimiced what the config.sh script would do.
</I>&gt;<i> Which is:
</I>&gt;<i>   rpm -e --nodeps lxde-common-branding-openSUSE-11.3-54.2.noarch
</I>&gt;<i> rpm -i /opt/SOS/lxde-common-branding-SOS-11.3-32.1.noarch.rpm
</I>&gt;<i> rpm -e --nodeps desktop-data-openSUSE-11.3-1.3.noarch
</I>&gt;<i> rpm -i /opt/SOS/desktop-data-SOS-11.3-15.1.noarch.rpm
</I>&gt;<i>
</I>&gt;<i> When I run the first command it indicates that the package isn't
</I>&gt;<i> installed...which means that the config.sh script did in fact
</I>&gt;<i> uninstall it.
</I>&gt;<i> When I run the second command it get an error that reads &quot;failed
</I>&gt;<i> dependencies:desktop-data-openSUSE is needed by lxde-commond
</I>&gt;<i> branding-SOS.
</I>&gt;<i> When I try to install the desktop-data-openSUSE package I get &quot;failed
</I>&gt;<i> Subprocess failed. Error: rpm failed: warning:
</I>&gt;<i> /etc/kde4/kdm/backgroundrc saved as /etc/kde4/kdm/backgrounds.rpmsave
</I>&gt;<i>   Error: unpacking of archive failed on file/usr/share/icons/default:
</I>&gt;<i> cpio rename failed&quot;......and it goes on and on.
</I>&gt;<i>
</I>&gt;<i> So installing this package isn't possible.
</I>&gt;<i>
</I>&gt;<i> I'm doing a rebuild right now.  I noticed that in the spec file of my
</I>&gt;<i> lxde-common-branding-sos package there was a line that read &quot;Requires:
</I>&gt;<i>        desktop-data-openSUSE&quot;
</I>
The &quot;Requires:&quot; in the spec file specifies your dependency and RPM will 
not install your package when a dependency cannot be met.

&gt;<i> I just changed that to
</I>&gt;<i> &quot;desktop-data-SOS&quot;.
</I>
That'll do the trick.

One more thing, obviously your config.sh exists successfully when it 
should be failing. Your build should have never succeeded.

You need to check the exit status of your rpm commands and when they 
fail exit config.sh with a non zero status and kiwi will indicate a failure.

&gt;<i> Yeah I'm in over my head but would really like to
</I>&gt;<i> understand this more.
</I>&gt;<i>
</I>&gt;<i> Robert where do I find the original (SUSE)  versions of these package
</I>&gt;<i> that I was using?
</I>
The &quot;original&quot; would be in the standard repo, just get rid of X11:/lxde 
in config.xml and you'll save yourself some headaches.

HTH,
Robert

-- 
Robert Schweikert                           MAY THE SOURCE BE WITH YOU
Novell-IBM Software Integration Center                LINUX
Tech Lead
<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-users">rschweikert at novell.com</A>
<A HREF="https://lists.berlios.de/mailman/listinfo/kiwi-users">rschweikert at ca.ibm.com</A>
781-464-8147

Novell
Making IT Work As One

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002546.html">[Kiwi-users] Kiwi or package issue?
</A></li>
	<LI>Next message: <A HREF="002549.html">[Kiwi-users] Kiwi or package issue?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2547">[ date ]</a>
              <a href="thread.html#2547">[ thread ]</a>
              <a href="subject.html#2547">[ subject ]</a>
              <a href="author.html#2547">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/kiwi-users">More information about the Kiwi-users
mailing list</a><br>
</body></html>
